{% extends 'base.html.twig' %}

{% block body %}

    <header id="head" class="secondary"></header>

    <div class="container">

        <ol class="breadcrumb">
            <li><a href="/">Home</a></li>
            <li class="active">Spotkania</li>
        </ol>

        <div class="row">

            <!-- Article main content -->
            <article class="col-xs-12 maincontent">
                <header class="page-header">
                    <h1 class="page-title">Spotkania</h1>
                </header>

                <div id="rightSideFormSearch">
                    <form id="search-form" class="pure-form pure-form-stacked">
                        <fieldset>
                            <p>  <input type="text" name = "search_leagueName" id = "search_leagueName" placeholder="Nazwa ligi"/></p>
                            <button {% if is_granted("ROLE_ADMIN") %}
                                        href = "/game"
                                    {% elseif is_granted("ROLE_REFEREE") %}
                                        href = "/refereeGame"
                                    {% endif %}
                                    type="submit" class="btn btn-primary btn-sm">Szukaj
                            </button>
                        </fieldset>
                    </form>
                </div>

                <table id = "tableList" class="table table-striped table-condensed" >
                    <thead>
                    <tr>
                        <th>Liga</th>
                        <th>Drużyna gospodarzy</th>
                        <th>Drużyna gości</th>
                        <th>Sędzia</th>
                        <th>Data</th>
                        <th>Sezon</th>
                        <th>Kolejka</th>
                        <th>Runda</th>
                        <th>Opcje</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for game in games %}
                        <tr>
                            <td>{{ game.leagueId }}</td>
                            <td>{{ game.clubIdHome }}</td>
                            <td>{{ game.clubIdAway }}</td>
                            <td>{{ game.refereeId }}</td>
                            <td>{{ game.date|date("d.m.Y") }}</td>
                            <td>{{ game.season }}</td>
                            <td>{{ game.matchDay }}</td>
                            <td>{{ game.round }}</td>
                            <td>
                                {% if is_granted('ROLE_ADMIN') %}
                                    <a href = "/game/edit/{{ game.id }}"
                                       class="btn btn-default btn-xs"
                                       role="button">Edytuj</a>&nbsp&nbsp
                                    <a href="#"
                                       class="btn btn-danger btn-xs delete"
                                       data-type = "game"
                                       data-id="{{ game.id }}">Usuń</a>
                                {% elseif is_granted('ROLE_REFEREE') %}
                                    <a href = "/referee_game/details/{{ game.id }}"
                                       class="btn btn-success btn-xs"
                                       role="button">Szczegóły</a>&nbsp&nbsp
                                    <a href="referee_game/report/{{ game.id }}"
                                       class="btn btn-primary btn-xs"
                                       data-type = "game"
                                       data-id="{{ game.id }}">Raport</a>
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>

                <div id = "rightSideFormSearch">
                    {{ knp_pagination_render(games) }}
                </div>

            </article>

        </div>
    </div>
    <div class="top-space"></div>

{% endblock %}

{% block javascripts %}
    <script src="/js/delete.js"></script>
{% endblock %}